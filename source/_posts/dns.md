---
title: 小谈DNS，域名解析
date: 2016-03-29
tags: 
- DNS
- DNS解析
---

DNS 域名系统，作为域名与IP地址相互映射的分布式数据库。通过域名最终得到相对应的 IP 地址的过程称为域名解析。 主机名到IP地址的映射主要的两种方式：

1.  `静态映射`，设备上具有自己的映射表来处理查询 IP 的行为。
2.  `动态映射` 通过域名解析系统（DNS），在全球特定的 DNS 服务器上来查询 IP 地址映射。

一般来说基本都是结合静态映射与动态映射来获得我们所需的目标域名的 IP 地址。 ![](http://image.freefe.cc/20161129114825.png) `查询流程`

1.  在浏览器中输入 www.baidu.com 时 ，先会检测本地 hosts 是否有对应的映射，如果有则直接返回此 IP 地址，完成域名解析。
2.  如果 hosts 中未配置，则查询本地 DNS 解析器缓存。查找映射关系，返回给客户端机，完成解析。
3.  如未找到，则会从 TCP/IP 中设置的首选 DNS 服务器，也称为本地DNS服务器。如果所查询映射在本地配置区域资源中，则返回给客户端机，并且此解析具有权威性。
4.  若在本地配置区域资源中未找到相关映射，而 DNS 服务器缓存中具有映射，则返回结果给客户端机，但该结果不具有权威性。
5.  当以上过程均为查找到所需的 IP 映射，会根据本地 DNS 服务器是否设置转发器的配置进行查询。
6.  转发模式：此 DNS 服务器会将请求转发到上一级 DNS 服务器，由上一级来进行解析，以此循环，若查询到映射，在以回路的形式返回结果。
7.  非转发模式，本地 DNS 服务器将全球发至13台根 DNS 服务器，根DNS服务器收到请求后会判断这个域名 .com 是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责 .com 域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址 baidu.com 给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找 baidu.com 域服务器，重复上面的动作，进行查询，直至找到 www.baidu.com 主机。